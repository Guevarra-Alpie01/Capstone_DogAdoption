{% extends 'admin_base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/post_list.css' %}">

<div class="d-flex justify-content-start mb-3">
    <a href="{% url 'dogadoption_admin:create_post' %}" class="btn btn-primary btn-lg create-post-btn">
        <i class="fas fa-plus-circle me-2"></i> Create Post
    </a>
</div>

{% for post in posts %}
<div class="post-card">

    <!-- POST INFO -->
    <div class="post-user">{{ post.user.username }}</div>
    <p class="post-caption">{{ post.caption }}</p>

    <div class="post-meta">
        {% if post.location %}
            üìç {{ post.location }} <br>
        {% endif %}
        Status: <b>{{ post.get_status_display }}</b><br>
        Posted on {{ post.created_at|date:"M d, Y H:i" }}
    </div>

    <!-- IMAGES -->
    {% if post.images.exists %}
    <div class="post-images">
        {% for image in post.images.all %}
            <img src="{{ image.image.url }}" alt="Dog image">
        {% endfor %}
    </div>
    {% endif %}

    <!-- üîπ BUTTONS AT BOTTOM -->
    <div class="post-actions mt-3">
        <a href="{% url 'dogadoption_admin:claim_requests' post.id %}" class="btn btn-warning btn-sm action-btn">
            üßæ Claim
            {% if post.claim_count > 0 %}
                <span class="badge bg-danger">{{ post.claim_count }}</span>
            {% endif %}
        </a>

        <a href="{% url 'dogadoption_admin:adoption_requests' post.id %}" class="btn btn-success btn-sm action-btn">
            üêæ Adopt
            {% if post.adopt_count > 0 %}
                <span class="badge bg-danger">{{ post.adopt_count }}</span>
            {% endif %}
        </a>
    </div>

</div>
{% empty %}
<p class="text-muted">No dog adoption posts yet</p>
{% endfor %}

{% endblock %}
