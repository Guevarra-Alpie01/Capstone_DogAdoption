{% extends 'admin_base.html' %}
{% load static %}

{% block content %}

<h1>Dog Adoption Feed ğŸ¾</h1>

<a href="{% url 'dogadoption_admin:create_post' %}">Create Post</a>
<hr>

{% for post in posts %}
<div style="border:1px solid #ccc; padding:15px; margin-bottom:20px; position:relative;">

    <!-- CLAIM & ADOPT BUTTON -->
    <a href="{% url 'dogadoption_admin:adoption_requests' post.id %}"
   style="
       position:absolute;
       top:10px;
       right:10px;
       background:#2563eb;
       color:white;
       padding:6px 14px;
       border-radius:20px;
       text-decoration:none;
       font-size:14px;
   ">
    ğŸ¶ Claim & Adopt
    {% if post.pending_requests > 0 %}
        <span style="
            background:red;
            color:white;
            padding:2px 8px;
            border-radius:50%;
            font-size:12px;
            margin-left:6px;
        ">
            {{ post.pending_requests }}
        </span>
    {% endif %}
</a>


    <strong>{{ post.user.username }}</strong>
    <p>{{ post.caption }}</p>

    {% if post.location %}
        <small>ğŸ“ {{ post.location }}</small><br>
    {% endif %}

    <small>Status: <b>{{ post.get_status_display }}</b></small><br>
    <small>Posted on {{ post.created_at }}</small>

    <div style="margin-top:10px;">
        {% for image in post.images.all %}
            <img src="{{ image.image.url }}" width="200">
        {% endfor %}
    </div>

</div>
{% empty %}
<p>No dog adoption posts yet ğŸ¶</p>
{% endfor %}


{% endblock %}