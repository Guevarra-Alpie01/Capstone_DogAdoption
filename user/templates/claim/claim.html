{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">

    <h2 class="mb-4">ğŸ¾ My Dog Claims</h2>

    {% for claim in claims %}
        <div class="card mb-3 shadow-sm p-3">

            <h5 class="mb-1">ğŸ• {{ claim.post.caption }}</h5>

            {% if claim.post.location %}
                <small class="text-muted">ğŸ“ {{ claim.post.location }}</small><br>
            {% endif %}

            <small class="text-muted">
                ğŸ—“ Submitted on {{ claim.created_at|date:"M d, Y" }}
            </small>

            <hr>

            <p class="mb-1">
                <strong>Status:</strong>

                {% if claim.status == 'pending' %}
                    <span class="text-warning fw-semibold">
                        Pending â³
                    </span>

                {% elif claim.status == 'accepted' %}
                    <span class="text-success fw-semibold">
                        Approved âœ…
                    </span>

                {% elif claim.status == 'rejected' %}
                    <span class="text-danger fw-semibold">
                        Rejected âŒ
                    </span>
                {% endif %}
            </p>

            {% if claim.message %}
                <p class="mt-2">
                    <strong>Your Message:</strong><br>
                    {{ claim.message|truncatewords:30 }}
                </p>
            {% endif %}

            {% if claim.images.all %}
                <p class="mt-2 mb-1"><strong>ğŸ“¸ Submitted Photos:</strong></p>
                <div class="d-flex gap-2 flex-wrap">
                    {% for img in claim.images.all %}
                        <img src="{{ img.image.url }}"
                             width="100"
                             height="100"
                             style="object-fit:cover;border-radius:6px;">
                    {% endfor %}
                </div>
            {% endif %}

        </div>

    {% empty %}
        <p class="text-muted">
            You havenâ€™t submitted any claims yet ğŸ¶
        </p>
    {% endfor %}

</div>
{% endblock %}
