{% extends 'admin_base.html' %}
{% load static %}


{% block content %}
<link rel="stylesheet" href="{% static 'css/create_announcement.css' %}">
<div class="create-announcement-container">

    <h2>ðŸ“¢ Create Announcement</h2>

    <form method="POST" action="{% url 'dogadoption_admin:announcement_create' %}" enctype="multipart/form-data" class="announcement-form">
        {% csrf_token %}

        <!-- POST TYPE -->
        <label>Post Type</label>
        <select name="post_type" required id="postType">
            <option value="COLOR">Color Post</option>
            <option value="IMAGE_BG">Image Background</option>
            <option value="PHOTO">Photo Post</option>
        </select>

        <!-- CONTENT -->
        <label>Announcement Text</label>
        <textarea name="content" rows="4" placeholder="Write your announcement..." required></textarea>

        <!-- BACKGROUND COLOR -->
        <div id="colorField">
            <label>Background Color</label>
            <input type="color" name="background_color" value="#4f46e5">
        </div>

        <!-- IMAGE -->
        <div id="imageField" style="display:none;">
            <label>Upload Image</label>
            <input type="file" name="background_image" accept="image/*">
        </div>

        <!-- SCHEDULE (OPTIONAL) -->
        <label>Dog Activity Schedule (Optional)</label>
        <textarea name="schedule_data" rows="4"
                  placeholder='Example:
[
  {"time": "9:00 AM", "task": "Morning Walk"},
  {"time": "12:00 PM", "task": "Feeding"}
]'></textarea>

        <button type="submit" class="submit-btn">ðŸš€ Post Announcement</button>
    </form>

</div>

<!-- SIMPLE JS -->
<script>
    const postType = document.getElementById("postType");
    const colorField = document.getElementById("colorField");
    const imageField = document.getElementById("imageField");

    function toggleFields() {
        if (postType.value === "COLOR") {
            colorField.style.display = "block";
            imageField.style.display = "none";
        }
        else if (postType.value === "IMAGE_BG" || postType.value === "PHOTO") {
            colorField.style.display = "none";
            imageField.style.display = "block";
        }
    }

    postType.addEventListener("change", toggleFields);
    toggleFields();
</script>

{% endblock %}
